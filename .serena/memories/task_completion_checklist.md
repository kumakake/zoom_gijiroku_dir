# タスク完了時のチェックリスト

## 必須実行項目（タスク完了時）

### 1. Lint・型チェック実行
```bash
# Frontend
cd frontend && npm run lint
cd frontend && npm run type-check  # TypeScript型エラーチェック

# Backend  
cd backend && npm run lint
```

### 2. テスト実行
```bash
# Backend全テスト実行
cd backend && npm test

# 特定領域テスト（必要に応じて）
npm run test:quality      # 品質テスト
npm run test:degradation  # デグレード防止テスト
npm run test:tenant-admin # テナント機能テスト
```

### 3. ビルド確認
```bash
# Frontend
cd frontend && npm run build

# Backend
cd backend && npm run build
```

### 4. 動作確認
```bash
# 開発サーバー起動確認
docker compose up -d

# ヘルスチェック
curl http://localhost:8000/health

# ログ確認
docker compose logs -f
```

## デグレード防止の重要原則

### データ保護最重要ルール
- **カラム削除前**: 必ずユーザー承認を得る
- **設定データ変更**: Zoom設定等の重要データは慎重に扱う
- **段階的変更**: 一度に複数の変更を行わない

### 既存機能への影響確認
- **API仕様変更**: 既存エンドポイントの下位互換性確保
- **データベーススキーマ**: 既存データとの整合性確認  
- **フロントエンド**: 既存画面・機能の動作確認

### 修正前の強制ルール
1. **現在のコード構造理解**: ファイル概要・処理フロー確認
2. **修正内容の詳細説明**: 変更箇所・理由・影響範囲
3. **テスト計画策定**: 修正後の検証方法
4. **ユーザー承認取得**: 重要な変更は事前承認必須

## Git・バージョン管理

### コミット前チェック
- [ ] Lintエラーなし
- [ ] 型エラーなし  
- [ ] テスト通過
- [ ] ビルド成功
- [ ] 機密情報混入なし

### コミット時の注意
- **絶対禁止**: `git config`変更
- **必須**: 機密情報の除外確認
- **推奨**: 小さな単位でのコミット

## パフォーマンス・セキュリティ

### 実行前確認項目
- [ ] データベースクエリ最適化
- [ ] APIレスポンス時間確認
- [ ] メモリリーク対策
- [ ] セキュリティヘッダー設定
- [ ] 入力値検証実装

## 本番デプロイ準備

### 環境設定確認
- [ ] 環境変数正常設定
- [ ] PM2設定ファイル更新
- [ ] データベース移行スクリプト準備
- [ ] バックアップ取得

### 最終確認事項
- [ ] 全テストスイート通過
- [ ] セキュリティテスト実行
- [ ] パフォーマンステスト実行
- [ ] ドキュメント更新

## トラブルシューティング対応

### よくある問題への対処
- **フロントエンド反映されない**: `./scripts/dev-frontend-reset.sh`
- **ポート競合**: `lsof -i :3000`, `lsof -i :8000`
- **データベース接続エラー**: `docker compose restart db`
- **Redis接続エラー**: `docker compose restart redis`

### 緊急時対応
- [ ] ログ詳細確認
- [ ] エラー原因特定
- [ ] 影響範囲把握
- [ ] ロールバック計画準備

## ドキュメント更新

### 更新対象（必要に応じて）
- [ ] API仕様変更時: エンドポイント説明
- [ ] データベース変更時: スキーマ説明  
- [ ] 新機能追加時: 使用方法説明
- [ ] 設定変更時: 環境変数説明

**重要**: CLAUDE.mdの指示により、不要なドキュメントファイルは作成しない