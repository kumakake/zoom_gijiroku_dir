# Zoom Webhook専用Apache2設定修正
# /etc/apache2/sites-available/tools.cross-astem.jp.conf に追加

# Webhook専用設定（レスポンス保持）
<Location "/zm/api/webhooks/zoom">
    ProxyPass "http://localhost:3020/api/webhooks/zoom"
    ProxyPassReverse "http://localhost:3020/api/webhooks/zoom"
    ProxyPreserveHost On
    
    # レスポンスボディとヘッダーを保持
    ProxyPassReverse Off
    SetEnv proxy-nokeepalive 1
    SetEnv force-proxy-request-1.0 1
    
    # Content-Typeの変更を防止
    Header unset Content-Type env=REDIRECT_STATUS
    
    # レスポンスタイムアウト延長
    ProxyTimeout 30
    
    # バッファリング無効化（レスポンス改変防止）
    SetEnv proxy-sendcl 1
    
    # デバッグ用ヘッダー
    Header always set X-Proxy-Backend "backend:3020"
</Location>